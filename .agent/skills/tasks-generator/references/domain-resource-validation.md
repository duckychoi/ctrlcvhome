# Domain Resource Validation ê·œì¹™

> "í™”ë©´ì´ ì£¼ë„í•˜ë˜, ë„ë©”ì¸ì´ ë°©ì–´í•œë‹¤"
> í™”ë©´ ìš”êµ¬ì‚¬í•­ê³¼ ë„ë©”ì¸ ë¦¬ì†ŒìŠ¤ ê°„ Interface Contract Validation

---

## ì™œ ê²€ì¦ì´ í•„ìš”í•œê°€?

### ì‹¤íŒ¨ ì‚¬ë¡€

| ì‹¤íŒ¨ | ì›ì¸ | ê²€ì¦ìœ¼ë¡œ ë°©ì§€ |
|------|------|-------------|
| 500 Internal Server Error | í™”ë©´ì´ ìš”êµ¬í•˜ëŠ” í•„ë“œê°€ APIì— ì—†ìŒ | Field Coverage ê²€ì¦ |
| 404 Not Found | í™”ë©´ì´ ì°¸ì¡°í•˜ëŠ” ì—”ë“œí¬ì¸íŠ¸ê°€ ì—†ìŒ | Endpoint Existence ê²€ì¦ |
| 401 Unauthorized | í™”ë©´ê³¼ APIì˜ ì¸ì¦ ìš”êµ¬ì‚¬í•­ ë¶ˆì¼ì¹˜ | Auth Consistency ê²€ì¦ |

---

## ê²€ì¦ ê·œì¹™

### 1. Field Coverage (í•„ë“œ ì»¤ë²„ë¦¬ì§€)

í™”ë©´ì´ í•„ìš”í•œ í•„ë“œ(`needs`)ê°€ ë¦¬ì†ŒìŠ¤ì— ì •ì˜ëœ í•„ë“œ(`fields`)ì— ì¡´ì¬í•˜ëŠ”ì§€ ê²€ì¦í•©ë‹ˆë‹¤.

```yaml
# í™”ë©´ ëª…ì„¸ (product-list.yaml)
data_requirements:
  - resource: products
    needs: [id, name, price, thumbnail, discount_rate]

# ë¦¬ì†ŒìŠ¤ ì •ì˜ (resources.yaml)
resources:
  products:
    fields:
      id: { type: uuid }
      name: { type: string }
      price: { type: number }
      thumbnail: { type: string }
      # discount_rate ì—†ìŒ!
```

**ê²€ì¦ ê²°ê³¼:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Field Coverage Validation                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  í™”ë©´: product-list.yaml                                     â”‚
â”‚  ë¦¬ì†ŒìŠ¤: products                                            â”‚
â”‚                                                              â”‚
â”‚  âœ… id           â†’ products.id         (uuid)               â”‚
â”‚  âœ… name         â†’ products.name       (string)             â”‚
â”‚  âœ… price        â†’ products.price      (number)             â”‚
â”‚  âœ… thumbnail    â†’ products.thumbnail  (string)             â”‚
â”‚  âŒ discount_rate â†’ ???                NOT FOUND            â”‚
â”‚                                                              â”‚
â”‚  FAILED: products.discount_rate í•„ë“œê°€ ì •ì˜ë˜ì§€ ì•ŠìŒ         â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Endpoint Existence (ì—”ë“œí¬ì¸íŠ¸ ì¡´ì¬)

í™”ë©´ì´ ì‚¬ìš©í•˜ëŠ” ë¦¬ì†ŒìŠ¤ì˜ ì—”ë“œí¬ì¸íŠ¸ê°€ ì •ì˜ë˜ì–´ ìˆëŠ”ì§€ ê²€ì¦í•©ë‹ˆë‹¤.

```yaml
# í™”ë©´ ëª…ì„¸ (product-detail.yaml)
data_requirements:
  - resource: products
    needs: [id, name, description]  # ìƒì„¸ ì¡°íšŒ í•„ìš”
  - resource: reviews
    needs: [id, content, rating]    # ë¦¬ë·° ëª©ë¡ í•„ìš”

# ë¦¬ì†ŒìŠ¤ ì •ì˜ (resources.yaml)
resources:
  products:
    endpoints:
      - method: GET
        path: /api/products
      - method: GET
        path: /api/products/:id
  # reviews ë¦¬ì†ŒìŠ¤ ì—†ìŒ!
```

**ê²€ì¦ ê²°ê³¼:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Endpoint Existence Validation                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  í™”ë©´: product-detail.yaml                                   â”‚
â”‚                                                              â”‚
â”‚  âœ… products                                                 â”‚
â”‚     - GET /api/products      (ëª©ë¡)                          â”‚
â”‚     - GET /api/products/:id  (ìƒì„¸)                          â”‚
â”‚                                                              â”‚
â”‚  âŒ reviews                                                  â”‚
â”‚     - ë¦¬ì†ŒìŠ¤ ì •ì˜ ì—†ìŒ!                                      â”‚
â”‚                                                              â”‚
â”‚  FAILED: reviews ë¦¬ì†ŒìŠ¤ê°€ ì •ì˜ë˜ì§€ ì•ŠìŒ                      â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Auth Consistency (ì¸ì¦ ì¼ê´€ì„±)

í™”ë©´ê³¼ ë¦¬ì†ŒìŠ¤ì˜ ì¸ì¦ ìš”êµ¬ì‚¬í•­ì´ ì¼ì¹˜í•˜ëŠ”ì§€ ê²€ì¦í•©ë‹ˆë‹¤.

```yaml
# í™”ë©´ ëª…ì„¸ (cart.yaml)
screen:
  name: ì¥ë°”êµ¬ë‹ˆ
  route: /cart
  auth: true  # ì¸ì¦ í•„ìš”

data_requirements:
  - resource: cart
    needs: [items, total]
    auth_required: true

  - resource: products
    needs: [id, name, price]
    # auth_required ì—†ìŒ (public)

# ë¦¬ì†ŒìŠ¤ ì •ì˜ (resources.yaml)
resources:
  cart:
    auth_required: true
    endpoints:
      - method: GET
        path: /api/cart
        auth: true

  products:
    # auth ì—†ìŒ (public)
    endpoints:
      - method: GET
        path: /api/products
```

**ê²€ì¦ ê²°ê³¼:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Auth Consistency Validation                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  í™”ë©´: cart.yaml (auth: true)                                â”‚
â”‚                                                              â”‚
â”‚  âœ… cart                                                     â”‚
â”‚     - í™”ë©´ auth: true                                        â”‚
â”‚     - ë¦¬ì†ŒìŠ¤ auth_required: true                             â”‚
â”‚     - ì¼ì¹˜!                                                  â”‚
â”‚                                                              â”‚
â”‚  âœ… products                                                 â”‚
â”‚     - í™”ë©´ auth_required: false (ê¸°ë³¸ê°’)                     â”‚
â”‚     - ë¦¬ì†ŒìŠ¤ auth_required: false (ê¸°ë³¸ê°’)                   â”‚
â”‚     - ì¼ì¹˜!                                                  â”‚
â”‚                                                              â”‚
â”‚  PASSED: ëª¨ë“  ì¸ì¦ ìš”êµ¬ì‚¬í•­ ì¼ì¹˜                              â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ê²€ì¦ ì›Œí¬í”Œë¡œìš°

### ìë™ ê²€ì¦ ì‹œì 

```
/tasks-generator ì‹¤í–‰
       â†“
Phase 0: Domain Resources ì½ê¸°
       â†“
Phase 1: Screen ëª…ì„¸ ì½ê¸°
       â†“
Phase 2: Interface Contract Validation
       â”œâ”€â”€ Field Coverage
       â”œâ”€â”€ Endpoint Existence
       â””â”€â”€ Auth Consistency
       â†“
ê²€ì¦ ì‹¤íŒ¨ ì‹œ â†’ íƒœìŠ¤í¬ ìƒì„± ì¤‘ë‹¨!
ê²€ì¦ í†µê³¼ ì‹œ â†’ íƒœìŠ¤í¬ ìƒì„± ì§„í–‰
```

### ê²€ì¦ ì‹¤íŒ¨ ì‹œ ì¡°ì¹˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âŒ Interface Contract Validation FAILED                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  ë°œê²¬ëœ ë¬¸ì œ:                                                 â”‚
â”‚                                                              â”‚
â”‚  1. [Field Coverage] products.thumbnail ë¯¸ì •ì˜               â”‚
â”‚  2. [Endpoint] reviews ë¦¬ì†ŒìŠ¤ ë¯¸ì •ì˜                         â”‚
â”‚  3. [Auth] wishlist ì¸ì¦ ìš”êµ¬ ë¶ˆì¼ì¹˜                         â”‚
â”‚                                                              â”‚
â”‚  í•´ê²° ë°©ë²•:                                                  â”‚
â”‚                                                              â”‚
â”‚  1. specs/domain/resources.yaml ì—…ë°ì´íŠ¸:                    â”‚
â”‚     products:                                                â”‚
â”‚       fields:                                                â”‚
â”‚         thumbnail: { type: string }  # ì¶”ê°€                  â”‚
â”‚                                                              â”‚
â”‚  2. reviews ë¦¬ì†ŒìŠ¤ ì •ì˜ ì¶”ê°€:                                 â”‚
â”‚     reviews:                                                 â”‚
â”‚       endpoints: [...]                                       â”‚
â”‚       fields: [...]                                          â”‚
â”‚                                                              â”‚
â”‚  3. wishlist auth_required ì¶”ê°€:                              â”‚
â”‚     wishlist:                                                â”‚
â”‚       auth_required: true                                    â”‚
â”‚                                                              â”‚
â”‚  â†’ ìˆ˜ì • í›„ /tasks-generator ì¬ì‹¤í–‰                            â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Coverage Matrix

ê²€ì¦ í†µê³¼ ì‹œ Coverage Matrixë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… Interface Contract Validation PASSED                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Coverage Matrix                                             â”‚
â”‚                                                              â”‚
â”‚  Resource     â”‚ Fields  â”‚ Endpoints â”‚ Screens Using          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”‚
â”‚  products     â”‚ 6/6 âœ…  â”‚ 3/3 âœ…    â”‚ product-list, detail   â”‚
â”‚  categories   â”‚ 4/4 âœ…  â”‚ 1/1 âœ…    â”‚ product-list           â”‚
â”‚  cart         â”‚ 3/3 âœ…  â”‚ 3/3 âœ…    â”‚ cart                   â”‚
â”‚  wishlist     â”‚ 2/2 âœ…  â”‚ 2/2 âœ…    â”‚ product-list           â”‚
â”‚  orders       â”‚ 5/5 âœ…  â”‚ 4/4 âœ…    â”‚ checkout, order-list   â”‚
â”‚                                                              â”‚
â”‚  Total: 5 resources, 8 screens, 100% coverage               â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ê²€ì¦ íƒœìŠ¤í¬ ìƒì„±

ê²€ì¦ í†µê³¼ í›„ ê° í™”ë©´ì— Verification íƒœìŠ¤í¬ê°€ ìƒì„±ë©ë‹ˆë‹¤:

```markdown
### [ ] P2-S1-V: ì—°ê²°ì  ê²€ì¦
- **ë‹´ë‹¹**: test-specialist
- **í™”ë©´**: /products
- **ê²€ì¦ í•­ëª©**:
  - [ ] Field Coverage: products.[id,name,price,thumbnail] ì¡´ì¬
  - [ ] Field Coverage: categories.[id,name,slug] ì¡´ì¬
  - [ ] Endpoint: GET /api/products ì‘ë‹µ ì •ìƒ
  - [ ] Endpoint: GET /api/categories ì‘ë‹µ ì •ìƒ
  - [ ] Navigation: ProductCard â†’ /products/:id ë¼ìš°íŠ¸ ì¡´ì¬
  - [ ] Auth: wishlist API ì¸ì¦ ì²´í¬
- **íŒŒì¼**: `tests/integration/product-list.verify.ts`
```

---

## ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸

ê²€ì¦ì„ ìˆ˜ë™ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ìŠ¤í¬ë¦½íŠ¸:

```bash
# ê²€ì¦ ì‹¤í–‰
/tasks-generator validate

# ì¶œë ¥ ì˜ˆì‹œ
[Domain Resource Validation]

Reading specs/domain/resources.yaml...
Reading specs/screens/*.yaml...

Validating product-list.yaml...
  âœ… Field Coverage: products (5/5)
  âœ… Field Coverage: categories (4/4)
  âœ… Endpoint Existence: 4/4 endpoints
  âœ… Auth Consistency: all match

Validating product-detail.yaml...
  âœ… Field Coverage: products (8/8)
  âœ… Field Coverage: reviews (4/4)
  âœ… Endpoint Existence: 3/3 endpoints
  âœ… Auth Consistency: all match

âœ… All validations passed!
```

---

## ì²´í¬ë¦¬ìŠ¤íŠ¸

```
+---------------------------------------------------------------------+
|  Domain Resource Validation ì²´í¬ë¦¬ìŠ¤íŠ¸                                |
+---------------------------------------------------------------------+
|                                                                     |
|  ğŸ“‹ ì‚¬ì „ ì¡°ê±´                                                        |
|                                                                     |
|  [ ] specs/domain/resources.yaml íŒŒì¼ ì¡´ì¬                          |
|  [ ] specs/screens/*.yaml íŒŒì¼ ì¡´ì¬                                  |
|  [ ] ëª¨ë“  í™”ë©´ì— data_requirements ì„¹ì…˜ ì¡´ì¬                          |
|                                                                     |
|  âœ… Field Coverage                                                   |
|                                                                     |
|  [ ] ëª¨ë“  í™”ë©´ì˜ needs í•„ë“œê°€ ë¦¬ì†ŒìŠ¤ fieldsì— ì¡´ì¬                    |
|  [ ] í•„ë“œ íƒ€ì…ì´ ì¼ì¹˜ (uuid, string, number ë“±)                       |
|                                                                     |
|  âœ… Endpoint Existence                                               |
|                                                                     |
|  [ ] ëª¨ë“  ì°¸ì¡° ë¦¬ì†ŒìŠ¤ê°€ resources.yamlì— ì •ì˜ë¨                       |
|  [ ] í•„ìš”í•œ HTTP ë©”ì„œë“œ (GET, POST ë“±) ì—”ë“œí¬ì¸íŠ¸ ì¡´ì¬                |
|                                                                     |
|  âœ… Auth Consistency                                                 |
|                                                                     |
|  [ ] í™”ë©´ authì™€ ë¦¬ì†ŒìŠ¤ auth_required ì¼ì¹˜                           |
|  [ ] ì¸ì¦ í•„ìš” í™”ë©´ì˜ ëª¨ë“  ë¦¬ì†ŒìŠ¤ê°€ ì¸ì¦ ì²´í¬                         |
|                                                                     |
+---------------------------------------------------------------------+

âš ï¸ ê²€ì¦ ì‹¤íŒ¨ ì‹œ íƒœìŠ¤í¬ ìƒì„±ì´ ì¤‘ë‹¨ë©ë‹ˆë‹¤!
âš ï¸ ë¦¬ì†ŒìŠ¤ ì •ì˜ë¥¼ ë¨¼ì € ìˆ˜ì •í•œ í›„ ì¬ì‹¤í–‰í•˜ì„¸ìš”!
```
