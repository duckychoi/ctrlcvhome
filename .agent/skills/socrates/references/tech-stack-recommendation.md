# 레벨별 기술 스택 제안 규칙

> 사용자 레벨에 따라 기술 스택을 자동 제안하거나, 선택을 요청합니다.
> "초보자는 결정 부담을 줄이고, 전문가는 자율성을 존중한다"

---

## 핵심 원칙

```
┌─────────────────────────────────────────────────────────────────┐
│  레벨별 기술 스택 결정 전략                                       │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  L1 (초심자): 자동 제안 → 확인만                                 │
│  L2 (일반인): AI 추천 + 간단한 Yes/No                            │
│  L3 (경험자): 선택지 제공 + 이유 설명                            │
│  L4 (전문가): 트레이드오프 질문 + 자유 선택                      │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 레벨별 제안 방식

### L1 (초심자) - "자동 제안, 확인만"

**원칙:** 결정 부담을 최소화. AI가 최적의 스택을 선택하고, 사용자는 확인만 합니다.

**동작:**
1. 프로젝트 특성 분석 (웹앱, 모바일, AI 등)
2. 최적 스택 자동 선택
3. 사용자에게 확인 요청 (거부 시에만 대안 제시)

**질문 형식:**

```json
{
  "questions": [{
    "question": "기술적인 부분은 제가 정리해드릴게요.\n\n당신의 프로젝트에 가장 적합한 기술 조합을 선택했어요:\n\n📦 프론트엔드: React + Vite\n🔧 백엔드: FastAPI (Python)\n💾 데이터베이스: PostgreSQL\n\n이 조합은 배우기 쉽고, 빠르게 개발할 수 있어요.\n\n이대로 진행할까요?",
    "header": "기술 스택",
    "options": [
      {"label": "네, 좋아요!", "description": "추천대로 진행"},
      {"label": "잘 모르겠어요", "description": "좀 더 설명해주세요"}
    ],
    "multiSelect": false
  }]
}
```

**"잘 모르겠어요" 선택 시:**

```
걱정 마세요! 간단히 설명드릴게요.

📦 React: 화면을 만드는 도구예요. 인스타그램, 페이스북도 이걸로 만들었어요.
🔧 FastAPI: 서버를 만드는 도구예요. 빠르고 AI 기능 추가가 쉬워요.
💾 PostgreSQL: 데이터를 저장하는 창고예요. 무료이고 안정적이에요.

이 조합은 초보자도 따라하기 쉽고, 나중에 확장도 가능해요.
진행할까요?
```

---

### L2 (일반인) - "AI 추천 + 간단한 확인"

**원칙:** AI가 추천하되, 간단한 설명과 함께 확인을 요청합니다.

**동작:**
1. 프로젝트 특성 + 사용자 언급 키워드 분석
2. 2-3개 옵션 중 1개 추천
3. 비유를 통한 간단한 설명

**질문 형식:**

```json
{
  "questions": [{
    "question": "기술 스택을 정해볼게요.\n\n당신의 프로젝트에는 이 조합이 좋을 것 같아요:\n\n📦 프론트엔드: React + Vite\n   → 레고 블록처럼 화면을 조립하는 도구\n\n🔧 백엔드: FastAPI\n   → 빠르고 문서가 자동으로 만들어지는 서버\n\n💾 데이터베이스: PostgreSQL\n   → 대용량 데이터도 안정적으로 저장\n\n어떻게 할까요?",
    "header": "기술 스택",
    "options": [
      {"label": "좋아요, 진행해요", "description": "추천 스택으로 결정"},
      {"label": "다른 옵션 보여주세요", "description": "대안을 확인하고 싶어요"}
    ],
    "multiSelect": false
  }]
}
```

**"다른 옵션" 선택 시:**

```json
{
  "questions": [{
    "question": "몇 가지 대안이 있어요:\n\n**옵션 A (추천)**: React + FastAPI + PostgreSQL\n→ 가장 범용적이고 배우기 쉬움\n\n**옵션 B**: Next.js + Node.js + PostgreSQL\n→ SEO가 중요하면 이게 나음\n\n**옵션 C**: Vue + Django + MySQL\n→ Python에 익숙하면 좋음\n\n어떤 게 끌리세요?",
    "header": "스택 선택",
    "options": [
      {"label": "옵션 A (추천)", "description": "React + FastAPI"},
      {"label": "옵션 B", "description": "Next.js + Node.js"},
      {"label": "옵션 C", "description": "Vue + Django"}
    ],
    "multiSelect": false
  }]
}
```

---

### L3 (경험자) - "선택지 + 이유 설명"

**원칙:** 여러 옵션을 제시하고, 각각의 장단점을 설명합니다.

**동작:**
1. 프로젝트 요구사항 분석
2. 3-4개 옵션 제시
3. 각 옵션의 장단점 명시
4. AI 추천은 하되 강요하지 않음

**질문 형식:**

```json
{
  "questions": [{
    "question": "기술 스택을 선택해주세요.\n\n**프론트엔드:**\n\n| 옵션 | 장점 | 단점 |\n|------|------|------|\n| React + Vite | 생태계, 채용 | 설정 필요 |\n| Next.js | SSR, SEO | 복잡도 |\n| SvelteKit | 성능, 간결함 | 작은 생태계 |\n\n[AI 추천: React + Vite]\n이유: 커뮤니티 지원이 풍부하고 빠른 개발 가능",
    "header": "프론트엔드",
    "options": [
      {"label": "React + Vite", "description": "추천 - 범용적"},
      {"label": "Next.js", "description": "SSR/SSG 필요시"},
      {"label": "SvelteKit", "description": "성능 우선"},
      {"label": "Vue + Nuxt", "description": "Vue 선호시"}
    ],
    "multiSelect": false
  }]
}
```

**백엔드 질문:**

```json
{
  "questions": [{
    "question": "**백엔드:**\n\n| 옵션 | 장점 | 단점 |\n|------|------|------|\n| FastAPI | 성능, 타입, 문서 자동화 | 생태계 작음 |\n| Django | 풀스택, ORM, Admin | 무거움 |\n| Express | 유연함, Node 통일 | 구조 자유도 높음 |\n| NestJS | 구조화, 타입 | 학습 곡선 |\n\n[AI 추천: FastAPI]\n이유: 빠른 개발 + 자동 API 문서 + 타입 안전성",
    "header": "백엔드",
    "options": [
      {"label": "FastAPI", "description": "추천 - Python"},
      {"label": "Django", "description": "풀스택 Python"},
      {"label": "Express", "description": "Node.js 유연함"},
      {"label": "NestJS", "description": "Node.js 구조화"}
    ],
    "multiSelect": false
  }]
}
```

---

### L4 (전문가) - "트레이드오프 질문 + 자유 선택"

**원칙:** 기술적 트레이드오프를 직접 논의하고, 전문가의 판단을 존중합니다.

**동작:**
1. AI는 제안하지 않고 질문으로 시작
2. 트레이드오프 관점에서 대화
3. 전문가의 선택을 존중하고 기록

**질문 형식:**

```json
{
  "questions": [{
    "question": "기술 스택은 어떻게 생각하세요?\n\n몇 가지 고려 포인트:\n\n1️⃣ SSR이 필요한가요, CSR로 충분한가요?\n2️⃣ Python vs Node.js 중 팀 역량은요?\n3️⃣ 초기 개발 속도 vs 장기 유지보수, 뭐가 우선인가요?\n\n선호하는 스택이 있으시면 말씀해주세요.",
    "header": "기술 스택",
    "options": [
      {"label": "이미 정해놨어요", "description": "Other로 직접 입력"},
      {"label": "논의해보고 싶어요", "description": "트레이드오프 분석"},
      {"label": "추천해주세요", "description": "제 상황에 맞는 추천"}
    ],
    "multiSelect": false
  }]
}
```

**"논의해보고 싶어요" 선택 시:**

```
좋아요. 몇 가지 물어볼게요.

1. 팀 구성은 어떻게 되나요?
   - 풀스택 1명? BE/FE 분리?
   - 주력 언어는요?

2. 확장성 요구사항은요?
   - 초기 DAU 목표?
   - 6개월 후 예상 트래픽?

3. 특수 요구사항이 있나요?
   - 실시간 기능 (WebSocket)?
   - ML/AI 연동?
   - 복잡한 쿼리?

이 정보로 최적의 조합을 찾아볼게요.
```

**전문가가 직접 입력 시:**

```
말씀하신 스택으로 정리할게요:

- Frontend: {입력값}
- Backend: {입력값}
- Database: {입력값}

혹시 이 조합에서 예상되는 리스크가 있을까요?
그리고 왜 이 스택을 선택하셨는지 간단히 적어주시면
TRD에 Decision Log로 기록할게요.
```

---

## 프로젝트 유형별 기본 추천

### 추천 매트릭스

| 프로젝트 유형 | Frontend | Backend | Database | 이유 |
|--------------|----------|---------|----------|------|
| **웹 앱 (일반)** | React + Vite | FastAPI | PostgreSQL | 범용적, 빠른 개발 |
| **SEO 중요** | Next.js | FastAPI | PostgreSQL | SSR/SSG 지원 |
| **실시간** | React + Vite | FastAPI + WebSocket | PostgreSQL + Redis | 실시간 처리 |
| **AI/ML 연동** | React + Vite | FastAPI | PostgreSQL + Pinecone | Python 생태계 |
| **풀스택 JS** | Next.js | tRPC or Express | PostgreSQL + Prisma | 타입 공유 |
| **MVP 초고속** | Next.js | Supabase | Supabase | 서버리스 |
| **대규모** | React + Vite | FastAPI + Celery | PostgreSQL + Redis | 확장성 |

### 키워드 기반 자동 감지

| 키워드 | 추천 변경 |
|--------|----------|
| "SEO", "검색 노출" | Next.js 추천 |
| "실시간", "채팅" | WebSocket + Redis 추가 |
| "AI", "ML", "추천" | FastAPI + Vector DB |
| "빠르게", "MVP" | Supabase 권장 |
| "대규모", "확장" | 마이크로서비스 고려 |

---

## 스택 결정 흐름

```
┌─────────────────────────────────────────────────────────────────┐
│  기술 스택 결정 흐름                                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  1. 레벨 확인 (L1~L4)                                            │
│       ↓                                                          │
│  2. 프로젝트 유형 분석                                           │
│     └── 대화에서 추출: 웹앱? 모바일? AI?                         │
│       ↓                                                          │
│  3. 키워드 감지                                                  │
│     └── SEO? 실시간? 대규모?                                     │
│       ↓                                                          │
│  4. 레벨별 제안 방식 적용                                        │
│     ├── L1: 자동 제안 + 확인                                     │
│     ├── L2: 추천 + 간단한 Yes/No                                 │
│     ├── L3: 선택지 + 장단점                                      │
│     └── L4: 트레이드오프 질문                                    │
│       ↓                                                          │
│  5. 사용자 선택/확인                                             │
│       ↓                                                          │
│  6. TRD에 기록                                                   │
│     └── 선택 이유 포함 (Decision Log)                            │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## TRD 기록 형식

스택 결정 후 TRD에 다음 형식으로 기록:

```markdown
## 2. 권장 기술 스택

### 결정 방식
- **사용자 레벨**: L{X}
- **결정 방식**: {자동 제안 / AI 추천 수락 / 사용자 선택}

### 2.1 프론트엔드

| 항목 | 선택 | 이유 |
|------|------|------|
| 프레임워크 | React + Vite | {이유 - AI 추천 또는 사용자 입력} |

### Decision Log

| 결정 | 대안 | 선택 이유 |
|------|------|----------|
| React | Vue, Svelte | {사용자가 제공한 이유 또는 AI 추천 이유} |
```

---

## 예외 상황 처리

### 사용자가 처음 듣는 기술을 언급할 때

```
{기술명}이요? 제가 잘 모르는 기술이네요.
간단히 설명해주실 수 있어요?

아니면, 비슷한 역할을 하는 익숙한 기술로 대체할까요?
```

### 사용자가 비현실적인 조합을 원할 때

```
말씀하신 조합으로 진행할 수 있어요.
다만, 몇 가지 주의할 점이 있어요:

⚠️ {잠재적 문제점}

괜찮으시면 진행할게요.
아니면 대안을 찾아볼까요?
```

### 사용자가 결정을 미룰 때

```
기술 스택은 나중에 정해도 괜찮아요.
지금은 기본 추천({기본 스택})으로 진행하고,
실제 개발 시작할 때 다시 논의해도 돼요.

일단 진행할까요?
```

---

## 관련 문서

- [레벨 측정 시스템](./level-assessment.md)
- [TRD 템플릿](./trd-template.md)
- [동적 질문 생성 규칙](./dynamic-questions.md)
